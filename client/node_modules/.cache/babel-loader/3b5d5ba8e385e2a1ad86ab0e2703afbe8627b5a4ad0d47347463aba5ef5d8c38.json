{"ast":null,"code":"import axios from\"axios\";import React,{useEffect,useState}from\"react\";import{useNavigate,useParams}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Modify=()=>{let params=useParams();let navigate=useNavigate();const[postInfo,setPostInfo]=useState({});const[title,setTitle]=useState(\"\");const[contents,setContents]=useState(\"\");useEffect(()=>{let body={postNum:params.postNum};axios.post(\"/api/post/detail\",body).then(response=>{if(response.data.success){setPostInfo(response.data.postList);}}).catch(err=>console.log(err));},[params.postNum]);useEffect(()=>{setTitle(postInfo.title);setContents(postInfo.content);},[postInfo]);const onSubmit=e=>{e.preventDefault();if(title===\"\"&&contents===\"\"){return alert(\"내용을 작성해주세요\");}let body={title:title,content:contents,postNum:params.postNum};axios.post(\"/api/post/modify\",body).then(res=>{if(res.data.success){alert(\"수정이 완료되었습니다.\");navigate(\"/detail/\".concat(params.postNum));}}).catch(err=>console.log(err));};return/*#__PURE__*/_jsx(\"section\",{id:\"login\",className:\"join\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__inner\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"\\uAC8C\\uC2DC\\uAE00 \\uC218\\uC815\\uD558\\uAE30!\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login_form btStyle bmStyle\",children:/*#__PURE__*/_jsx(\"form\",{action:\"#\",name:\"#\",method:\"post\",children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{className:\"blind\",children:\"\\uAC8C\\uC2DC\\uAE00 \\uC791\\uC131\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"youEmail\",className:\"required blind\",children:\"title\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",id:\"title\",name:\"title\",placeholder:\"title\",onChange:e=>{setTitle(e.currentTarget.value);},value:title||\"\",autoComplete:\"off\",required:true}),/*#__PURE__*/_jsx(\"textarea\",{name:\"content\",id:\"content\",cols:\"30\",rows:\"11\",onChange:e=>{setContents(e.currentTarget.value);},value:contents||\"\",style:{width:\"590px\"}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"post__btn\",onClick:e=>onSubmit(e),children:\"UPDATE\"}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"post__btn\",children:\"CANCLE\"})]})})})]})});};export default Modify;","map":{"version":3,"names":["axios","React","useEffect","useState","useNavigate","useParams","jsx","_jsx","jsxs","_jsxs","Modify","params","navigate","postInfo","setPostInfo","title","setTitle","contents","setContents","body","postNum","post","then","response","data","success","postList","catch","err","console","log","content","onSubmit","e","preventDefault","alert","res","concat","id","className","children","action","name","method","htmlFor","type","placeholder","onChange","currentTarget","value","autoComplete","required","cols","rows","style","width","onClick"],"sources":["C:/Users/line/Documents/GitHub/simpleBlogV2/client/src/components/post/Modify.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useNavigate, useParams } from \"react-router-dom\";\r\n\r\nconst Modify = () => {\r\n    let params = useParams();\r\n    let navigate = useNavigate();\r\n\r\n    const [postInfo, setPostInfo] = useState({});\r\n    const [title, setTitle] = useState(\"\");\r\n    const [contents, setContents] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        let body = {\r\n            postNum: params.postNum,\r\n        };\r\n        axios\r\n            .post(\"/api/post/detail\", body)\r\n            .then((response) => {\r\n                if (response.data.success) {\r\n                    setPostInfo(response.data.postList);\r\n                }\r\n            })\r\n            .catch((err) => console.log(err));\r\n    }, [params.postNum]);\r\n\r\n    useEffect(() => {\r\n        setTitle(postInfo.title);\r\n        setContents(postInfo.content);\r\n    }, [postInfo]);\r\n\r\n    const onSubmit = (e) => {\r\n        e.preventDefault();\r\n        if (title === \"\" && contents === \"\") {\r\n            return alert(\"내용을 작성해주세요\");\r\n        }\r\n\r\n        let body = {\r\n            title: title,\r\n            content: contents,\r\n            postNum: params.postNum,\r\n        };\r\n\r\n        axios\r\n            .post(\"/api/post/modify\", body)\r\n            .then((res) => {\r\n                if (res.data.success) {\r\n                    alert(\"수정이 완료되었습니다.\");\r\n                    navigate(`/detail/${params.postNum}`);\r\n                }\r\n            })\r\n            .catch((err) => console.log(err));\r\n    };\r\n    return (\r\n        <section id=\"login\" className=\"join\">\r\n            <div className=\"login__inner\">\r\n                <h2>게시글 수정하기!</h2>\r\n                <div className=\"login_form btStyle bmStyle\">\r\n                    <form action=\"#\" name=\"#\" method=\"post\">\r\n                        <fieldset>\r\n                            <legend className=\"blind\">게시글 작성</legend>\r\n                            <div>\r\n                                <label\r\n                                    htmlFor=\"youEmail\"\r\n                                    className=\"required blind\"\r\n                                >\r\n                                    title\r\n                                </label>\r\n                                <input\r\n                                    type=\"text\"\r\n                                    id=\"title\"\r\n                                    name=\"title\"\r\n                                    placeholder=\"title\"\r\n                                    onChange={(e) => {\r\n                                        setTitle(e.currentTarget.value);\r\n                                    }}\r\n                                    value={title || \"\"}\r\n                                    autoComplete=\"off\"\r\n                                    required\r\n                                />\r\n                                <textarea\r\n                                    name=\"content\"\r\n                                    id=\"content\"\r\n                                    cols=\"30\"\r\n                                    rows=\"11\"\r\n                                    onChange={(e) => {\r\n                                        setContents(e.currentTarget.value);\r\n                                    }}\r\n                                    value={contents || \"\"}\r\n                                    style={{ width: \"590px\" }}\r\n                                ></textarea>\r\n                            </div>\r\n\r\n                            <button\r\n                                type=\"submit\"\r\n                                className=\"post__btn\"\r\n                                onClick={(e) => onSubmit(e)}\r\n                            >\r\n                                UPDATE\r\n                            </button>\r\n                            <button type=\"submit\" className=\"post__btn\">\r\n                                CANCLE\r\n                            </button>\r\n                        </fieldset>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Modify;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}