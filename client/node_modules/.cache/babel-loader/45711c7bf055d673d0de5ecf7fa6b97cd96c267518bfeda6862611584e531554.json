{"ast":null,"code":"import React,{useEffect,useState}from\"react\";import{Link,useNavigate,useParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Detail=()=>{const params=useParams();const navigate=useNavigate();console.log(params.postNum);const[postInfo,setPostInfo]=useState({});useEffect(()=>{let body={postNum:params.postNum};axios.post(\"/api/post/detail\",body).then(response=>{console.log(response);setPostInfo(response.data.postList);}).catch(err=>console.log(err));},[params.postNum]);const deleteHandler=e=>{if(window.confirm(\"정말로 삭제하시겠습니까?\")){let body={postNum:params.postNum};axios.post(\"/api/post/delete\",body).then(response=>{if(response.data.success){alert(\"게시글이 삭제되었습니다.\");navigate(\"/list\");}}).catch(err=>{console.log(err);alert(\"게시글 삭제가 실패했습니다.\");});}};return/*#__PURE__*/_jsx(\"section\",{className:\"detail\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"detail__wrap\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"detail__title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:postInfo.title}),/*#__PURE__*/_jsx(\"div\",{className:\"auth\",children:\"auth\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"detail__content\",children:[postInfo.content,postInfo.image&&/*#__PURE__*/_jsx(\"img\",{src:postInfo.image,alt:postInfo.title})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"modify\",children:/*#__PURE__*/_jsx(Link,{to:\"/modify/\".concat(postInfo.postNum),children:\" mod\"})}),/*#__PURE__*/_jsx(\"button\",{className:\"delete\",onClick:e=>deleteHandler(e),children:\"del\"}),/*#__PURE__*/_jsx(\"button\",{className:\"list\",children:/*#__PURE__*/_jsx(Link,{to:\"/list\",children:\"back\"})})]})]})});};export default Detail;","map":{"version":3,"names":["React","useEffect","useState","Link","useNavigate","useParams","axios","jsx","_jsx","jsxs","_jsxs","Detail","params","navigate","console","log","postNum","postInfo","setPostInfo","body","post","then","response","data","postList","catch","err","deleteHandler","e","window","confirm","success","alert","className","children","title","content","image","src","alt","to","concat","onClick"],"sources":["C:/Users/line/Documents/GitHub/simpleBlogV2/client/src/components/post/Detail.jsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\r\nimport { Link, useNavigate, useParams } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nconst Detail = () => {\r\n    const params = useParams();\r\n    const navigate = useNavigate();\r\n    console.log(params.postNum);\r\n    const [postInfo, setPostInfo] = useState({});\r\n\r\n    useEffect(() => {\r\n        let body = {\r\n            postNum: params.postNum,\r\n        };\r\n        axios\r\n            .post(\"/api/post/detail\", body)\r\n            .then((response) => {\r\n                console.log(response);\r\n                setPostInfo(response.data.postList);\r\n            })\r\n            .catch((err) => console.log(err));\r\n    }, [params.postNum]);\r\n\r\n    const deleteHandler = (e) => {\r\n        if (window.confirm(\"정말로 삭제하시겠습니까?\")) {\r\n            let body = {\r\n                postNum: params.postNum,\r\n            };\r\n            axios\r\n                .post(\"/api/post/delete\", body)\r\n                .then((response) => {\r\n                    if (response.data.success) {\r\n                        alert(\"게시글이 삭제되었습니다.\");\r\n                        navigate(\"/list\");\r\n                    }\r\n                })\r\n                .catch((err) => {\r\n                    console.log(err);\r\n                    alert(\"게시글 삭제가 실패했습니다.\");\r\n                });\r\n        }\r\n    };\r\n    return (\r\n        <section className=\"detail\">\r\n            <div className=\"detail__wrap\">\r\n                <div className=\"detail__title\">\r\n                    <h3>{postInfo.title}</h3>\r\n                    <div className=\"auth\">auth</div>\r\n                </div>\r\n                <div className=\"detail__content\">\r\n                    {postInfo.content}\r\n                    {postInfo.image && (\r\n                        <img src={postInfo.image} alt={postInfo.title} />\r\n                    )}\r\n                </div>\r\n\r\n                <div className=\"btn\">\r\n                    <button className=\"modify\">\r\n                        <Link to={`/modify/${postInfo.postNum}`}> mod</Link>\r\n                    </button>\r\n                    <button\r\n                        className=\"delete\"\r\n                        onClick={(e) => deleteHandler(e)}\r\n                    >\r\n                        del\r\n                    </button>\r\n                    <button className=\"list\">\r\n                        <Link to={\"/list\"}>back</Link>\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Detail;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}