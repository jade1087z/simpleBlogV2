{"ast":null,"code":"import React,{useState}from\"react\";import firebase from\"../../firebase.js\";import{useNavigate}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";const Join=()=>{const[youName,setYouName]=useState(\"\");const[youEmail,setYouEmail]=useState(\"\");const[youPass,setYouPass]=useState(\"\");const[youPassCheck,setYouPassCheck]=useState(\"\");const[flag,setFlag]=useState(false);let navigate=useNavigate();const joinFunc=async e=>{setFlag(true);e.preventDefault();if(!(youName&&youEmail&&youPass&&youPassCheck)){return alert(\"모든 항목을 채워야 회원가입이 가능합니다.\");}if(youPass!==youPassCheck){return alert(\"비밀번호가 다르네요\");}// 개인정보 --> 파이어베이스에 전달\nlet createdUser=await firebase.auth().createUserWithEmailAndPassword(youEmail,youPass);await createdUser.user.updateProfile({displayName:youName});console.log(createdUser);console.log(createdUser.user);// 회원가입한 데이터를 몽고디비로 전달\nlet body={email:createdUser.user.multiFactor.user.email,displayName:createdUser.user.multiFactor.user.displayName,uid:createdUser.user.multiFactor.user.uid};axios.post(\"/api/user/join\",body).then(response=>{setFlag(false);if(response.data.success){// 회원가입 성공\nalert(\"회원가입에 성공하였습니다!!\");navigate(\"/login\");}else{return alert(\"회원가입이 실패하였습니다.\");}});// let createdUser = await firebase\n//     .auth()\n//     .createUserWithEmailAndPassword(youEmail, youPass)\n//     .then((userCredential) => {\n//         // Signed in\n//         var user = userCredential.user;\n//         createdUser.user.updateProfile({\n//             displayName: youName,\n//         });\n//         console.log(user);\n//         console.log(createdUser);\n//         console.log(createdUser.user);\n//     })\n//     .catch((error) => {\n//         if (error.code == \"auth/email-already-in-use\") {\n//             alert(\"The email address is already in use\");\n//         } else if (error.code == \"auth/invalid-email\") {\n//             alert(\"The email address is not valid.\");\n//         } else if (error.code == \"auth/operation-not-allowed\") {\n//             alert(\"Operation not allowed.\");\n//         } else if (error.code == \"auth/weak-password\") {\n//             alert(\"The password is too weak.\");\n//         }\n//     });\n};return/*#__PURE__*/_jsx(\"section\",{id:\"login\",className:\"join\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"login__inner\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"sign up\"}),/*#__PURE__*/_jsx(\"div\",{className:\"login_form btStyle bmStyle\",children:/*#__PURE__*/_jsx(\"form\",{action:\"#\",name:\"#\",method:\"post\",children:/*#__PURE__*/_jsxs(\"fieldset\",{children:[/*#__PURE__*/_jsx(\"legend\",{className:\"blind\",children:\"\\uB85C\\uADF8\\uC778 \\uC601\\uC5ED\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"youEmail\",className:\"required blind\",children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"youEmail\",name:\"youEmail\",placeholder:\"E-mail\",className:\"input_style\",value:youEmail,onChange:e=>setYouEmail(e.currentTarget.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"youEmail\",className:\"required blind\",children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"youName\",name:\"youName\",placeholder:\"Name\",className:\"input_style\",value:youName,onChange:e=>setYouName(e.currentTarget.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"youPass\",className:\"required blind\",children:\"password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"paddword\",minLength:8,id:\"youPass\",name:\"youPass\",placeholder:\"password\",className:\"input_style\",value:youPass,onChange:e=>setYouPass(e.currentTarget.value),autocomplete:\"off\",required:true})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"youPass\",className:\"required blind\",children:\"passwordCheck\"}),/*#__PURE__*/_jsx(\"input\",{type:\"paddword\",minLength:8,id:\"youPass\",name:\"youPass\",placeholder:\"passwordCheck\",className:\"input_style\",value:youPassCheck,onChange:e=>setYouPassCheck(e.currentTarget.value),autocomplete:\"off\",required:true})]}),/*#__PURE__*/_jsx(\"button\",{disabled:flag,type:\"submit\",className:\"login__btn mt30\",onClick:e=>joinFunc(e),children:\"sign up\"})]})})})]})});};export default Join;","map":{"version":3,"names":["React","useState","firebase","useNavigate","axios","jsx","_jsx","jsxs","_jsxs","Join","youName","setYouName","youEmail","setYouEmail","youPass","setYouPass","youPassCheck","setYouPassCheck","flag","setFlag","navigate","joinFunc","e","preventDefault","alert","createdUser","auth","createUserWithEmailAndPassword","user","updateProfile","displayName","console","log","body","email","multiFactor","uid","post","then","response","data","success","id","className","children","action","name","method","htmlFor","type","placeholder","value","onChange","currentTarget","required","minLength","autocomplete","disabled","onClick"],"sources":["C:/Users/line/Documents/GitHub/simpleBlogV2/client/src/components/user/Join.jsx"],"sourcesContent":["import React, { useState } from \"react\";\r\nimport firebase from \"../../firebase.js\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport axios from \"axios\";\r\nconst Join = () => {\r\n    const [youName, setYouName] = useState(\"\");\r\n    const [youEmail, setYouEmail] = useState(\"\");\r\n    const [youPass, setYouPass] = useState(\"\");\r\n    const [youPassCheck, setYouPassCheck] = useState(\"\");\r\n    const [flag, setFlag] = useState(false);\r\n\r\n    let navigate = useNavigate();\r\n\r\n    const joinFunc = async (e) => {\r\n        setFlag(true);\r\n        e.preventDefault();\r\n\r\n        if (!(youName && youEmail && youPass && youPassCheck)) {\r\n            return alert(\"모든 항목을 채워야 회원가입이 가능합니다.\");\r\n        }\r\n\r\n        if (youPass !== youPassCheck) {\r\n            return alert(\"비밀번호가 다르네요\");\r\n        }\r\n\r\n        // 개인정보 --> 파이어베이스에 전달\r\n        let createdUser = await firebase\r\n            .auth()\r\n            .createUserWithEmailAndPassword(youEmail, youPass);\r\n\r\n        await createdUser.user.updateProfile({\r\n            displayName: youName,\r\n        });\r\n        console.log(createdUser);\r\n        console.log(createdUser.user);\r\n\r\n        // 회원가입한 데이터를 몽고디비로 전달\r\n        let body = {\r\n            email: createdUser.user.multiFactor.user.email,\r\n            displayName: createdUser.user.multiFactor.user.displayName,\r\n            uid: createdUser.user.multiFactor.user.uid,\r\n        };\r\n        axios.post(\"/api/user/join\", body).then((response) => {\r\n            setFlag(false);\r\n            if (response.data.success) {\r\n                // 회원가입 성공\r\n                alert(\"회원가입에 성공하였습니다!!\");\r\n                navigate(\"/login\");\r\n            } else {\r\n                return alert(\"회원가입이 실패하였습니다.\");\r\n            }\r\n        });\r\n\r\n        // let createdUser = await firebase\r\n        //     .auth()\r\n        //     .createUserWithEmailAndPassword(youEmail, youPass)\r\n        //     .then((userCredential) => {\r\n        //         // Signed in\r\n        //         var user = userCredential.user;\r\n        //         createdUser.user.updateProfile({\r\n        //             displayName: youName,\r\n        //         });\r\n\r\n        //         console.log(user);\r\n        //         console.log(createdUser);\r\n        //         console.log(createdUser.user);\r\n        //     })\r\n        //     .catch((error) => {\r\n        //         if (error.code == \"auth/email-already-in-use\") {\r\n        //             alert(\"The email address is already in use\");\r\n        //         } else if (error.code == \"auth/invalid-email\") {\r\n        //             alert(\"The email address is not valid.\");\r\n        //         } else if (error.code == \"auth/operation-not-allowed\") {\r\n        //             alert(\"Operation not allowed.\");\r\n        //         } else if (error.code == \"auth/weak-password\") {\r\n        //             alert(\"The password is too weak.\");\r\n        //         }\r\n        //     });\r\n    };\r\n\r\n    return (\r\n        <section id=\"login\" className=\"join\">\r\n            <div className=\"login__inner\">\r\n                <h2>sign up</h2>\r\n                <div className=\"login_form btStyle bmStyle\">\r\n                    <form action=\"#\" name=\"#\" method=\"post\">\r\n                        <fieldset>\r\n                            <legend className=\"blind\">로그인 영역</legend>\r\n                            <div>\r\n                                <label\r\n                                    htmlFor=\"youEmail\"\r\n                                    className=\"required blind\"\r\n                                >\r\n                                    E-mail\r\n                                </label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    id=\"youEmail\"\r\n                                    name=\"youEmail\"\r\n                                    placeholder=\"E-mail\"\r\n                                    className=\"input_style\"\r\n                                    value={youEmail}\r\n                                    onChange={(e) =>\r\n                                        setYouEmail(e.currentTarget.value)\r\n                                    }\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label\r\n                                    htmlFor=\"youEmail\"\r\n                                    className=\"required blind\"\r\n                                >\r\n                                    Name\r\n                                </label>\r\n                                <input\r\n                                    type=\"email\"\r\n                                    id=\"youName\"\r\n                                    name=\"youName\"\r\n                                    placeholder=\"Name\"\r\n                                    className=\"input_style\"\r\n                                    value={youName}\r\n                                    onChange={(e) =>\r\n                                        setYouName(e.currentTarget.value)\r\n                                    }\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label\r\n                                    htmlFor=\"youPass\"\r\n                                    className=\"required blind\"\r\n                                >\r\n                                    password\r\n                                </label>\r\n                                <input\r\n                                    type=\"paddword\"\r\n                                    minLength={8}\r\n                                    id=\"youPass\"\r\n                                    name=\"youPass\"\r\n                                    placeholder=\"password\"\r\n                                    className=\"input_style\"\r\n                                    value={youPass}\r\n                                    onChange={(e) =>\r\n                                        setYouPass(e.currentTarget.value)\r\n                                    }\r\n                                    autocomplete=\"off\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div>\r\n                                <label\r\n                                    htmlFor=\"youPass\"\r\n                                    className=\"required blind\"\r\n                                >\r\n                                    passwordCheck\r\n                                </label>\r\n                                <input\r\n                                    type=\"paddword\"\r\n                                    minLength={8}\r\n                                    id=\"youPass\"\r\n                                    name=\"youPass\"\r\n                                    placeholder=\"passwordCheck\"\r\n                                    className=\"input_style\"\r\n                                    value={youPassCheck}\r\n                                    onChange={(e) =>\r\n                                        setYouPassCheck(e.currentTarget.value)\r\n                                    }\r\n                                    autocomplete=\"off\"\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <button\r\n                                disabled={flag}\r\n                                type=\"submit\"\r\n                                className=\"login__btn mt30\"\r\n                                onClick={(e) => joinFunc(e)}\r\n                            >\r\n                                sign up\r\n                            </button>\r\n                        </fieldset>\r\n                    </form>\r\n                </div>\r\n            </div>\r\n        </section>\r\n    );\r\n};\r\n\r\nexport default Join;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,MAAO,CAAAC,QAAQ,KAAM,mBAAmB,CACxC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,MAAO,CAAAC,KAAK,KAAM,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAC1B,KAAM,CAAAC,IAAI,CAAGA,CAAA,GAAM,CACf,KAAM,CAACC,OAAO,CAAEC,UAAU,CAAC,CAAGV,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACW,QAAQ,CAAEC,WAAW,CAAC,CAAGZ,QAAQ,CAAC,EAAE,CAAC,CAC5C,KAAM,CAACa,OAAO,CAAEC,UAAU,CAAC,CAAGd,QAAQ,CAAC,EAAE,CAAC,CAC1C,KAAM,CAACe,YAAY,CAAEC,eAAe,CAAC,CAAGhB,QAAQ,CAAC,EAAE,CAAC,CACpD,KAAM,CAACiB,IAAI,CAAEC,OAAO,CAAC,CAAGlB,QAAQ,CAAC,KAAK,CAAC,CAEvC,GAAI,CAAAmB,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE5B,KAAM,CAAAkB,QAAQ,CAAG,KAAO,CAAAC,CAAC,EAAK,CAC1BH,OAAO,CAAC,IAAI,CAAC,CACbG,CAAC,CAACC,cAAc,CAAC,CAAC,CAElB,GAAI,EAAEb,OAAO,EAAIE,QAAQ,EAAIE,OAAO,EAAIE,YAAY,CAAC,CAAE,CACnD,MAAO,CAAAQ,KAAK,CAAC,yBAAyB,CAAC,CAC3C,CAEA,GAAIV,OAAO,GAAKE,YAAY,CAAE,CAC1B,MAAO,CAAAQ,KAAK,CAAC,YAAY,CAAC,CAC9B,CAEA;AACA,GAAI,CAAAC,WAAW,CAAG,KAAM,CAAAvB,QAAQ,CAC3BwB,IAAI,CAAC,CAAC,CACNC,8BAA8B,CAACf,QAAQ,CAAEE,OAAO,CAAC,CAEtD,KAAM,CAAAW,WAAW,CAACG,IAAI,CAACC,aAAa,CAAC,CACjCC,WAAW,CAAEpB,OACjB,CAAC,CAAC,CACFqB,OAAO,CAACC,GAAG,CAACP,WAAW,CAAC,CACxBM,OAAO,CAACC,GAAG,CAACP,WAAW,CAACG,IAAI,CAAC,CAE7B;AACA,GAAI,CAAAK,IAAI,CAAG,CACPC,KAAK,CAAET,WAAW,CAACG,IAAI,CAACO,WAAW,CAACP,IAAI,CAACM,KAAK,CAC9CJ,WAAW,CAAEL,WAAW,CAACG,IAAI,CAACO,WAAW,CAACP,IAAI,CAACE,WAAW,CAC1DM,GAAG,CAAEX,WAAW,CAACG,IAAI,CAACO,WAAW,CAACP,IAAI,CAACQ,GAC3C,CAAC,CACDhC,KAAK,CAACiC,IAAI,CAAC,gBAAgB,CAAEJ,IAAI,CAAC,CAACK,IAAI,CAAEC,QAAQ,EAAK,CAClDpB,OAAO,CAAC,KAAK,CAAC,CACd,GAAIoB,QAAQ,CAACC,IAAI,CAACC,OAAO,CAAE,CACvB;AACAjB,KAAK,CAAC,iBAAiB,CAAC,CACxBJ,QAAQ,CAAC,QAAQ,CAAC,CACtB,CAAC,IAAM,CACH,MAAO,CAAAI,KAAK,CAAC,gBAAgB,CAAC,CAClC,CACJ,CAAC,CAAC,CAEF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACJ,CAAC,CAED,mBACIlB,IAAA,YAASoC,EAAE,CAAC,OAAO,CAACC,SAAS,CAAC,MAAM,CAAAC,QAAA,cAChCpC,KAAA,QAAKmC,SAAS,CAAC,cAAc,CAAAC,QAAA,eACzBtC,IAAA,OAAAsC,QAAA,CAAI,SAAO,CAAI,CAAC,cAChBtC,IAAA,QAAKqC,SAAS,CAAC,4BAA4B,CAAAC,QAAA,cACvCtC,IAAA,SAAMuC,MAAM,CAAC,GAAG,CAACC,IAAI,CAAC,GAAG,CAACC,MAAM,CAAC,MAAM,CAAAH,QAAA,cACnCpC,KAAA,aAAAoC,QAAA,eACItC,IAAA,WAAQqC,SAAS,CAAC,OAAO,CAAAC,QAAA,CAAC,iCAAM,CAAQ,CAAC,cACzCpC,KAAA,QAAAoC,QAAA,eACItC,IAAA,UACI0C,OAAO,CAAC,UAAU,CAClBL,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC7B,QAED,CAAO,CAAC,cACRtC,IAAA,UACI2C,IAAI,CAAC,OAAO,CACZP,EAAE,CAAC,UAAU,CACbI,IAAI,CAAC,UAAU,CACfI,WAAW,CAAC,QAAQ,CACpBP,SAAS,CAAC,aAAa,CACvBQ,KAAK,CAAEvC,QAAS,CAChBwC,QAAQ,CAAG9B,CAAC,EACRT,WAAW,CAACS,CAAC,CAAC+B,aAAa,CAACF,KAAK,CACpC,CACDG,QAAQ,MACX,CAAC,EACD,CAAC,cACN9C,KAAA,QAAAoC,QAAA,eACItC,IAAA,UACI0C,OAAO,CAAC,UAAU,CAClBL,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC7B,MAED,CAAO,CAAC,cACRtC,IAAA,UACI2C,IAAI,CAAC,OAAO,CACZP,EAAE,CAAC,SAAS,CACZI,IAAI,CAAC,SAAS,CACdI,WAAW,CAAC,MAAM,CAClBP,SAAS,CAAC,aAAa,CACvBQ,KAAK,CAAEzC,OAAQ,CACf0C,QAAQ,CAAG9B,CAAC,EACRX,UAAU,CAACW,CAAC,CAAC+B,aAAa,CAACF,KAAK,CACnC,CACDG,QAAQ,MACX,CAAC,EACD,CAAC,cACN9C,KAAA,QAAAoC,QAAA,eACItC,IAAA,UACI0C,OAAO,CAAC,SAAS,CACjBL,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC7B,UAED,CAAO,CAAC,cACRtC,IAAA,UACI2C,IAAI,CAAC,UAAU,CACfM,SAAS,CAAE,CAAE,CACbb,EAAE,CAAC,SAAS,CACZI,IAAI,CAAC,SAAS,CACdI,WAAW,CAAC,UAAU,CACtBP,SAAS,CAAC,aAAa,CACvBQ,KAAK,CAAErC,OAAQ,CACfsC,QAAQ,CAAG9B,CAAC,EACRP,UAAU,CAACO,CAAC,CAAC+B,aAAa,CAACF,KAAK,CACnC,CACDK,YAAY,CAAC,KAAK,CAClBF,QAAQ,MACX,CAAC,EACD,CAAC,cACN9C,KAAA,QAAAoC,QAAA,eACItC,IAAA,UACI0C,OAAO,CAAC,SAAS,CACjBL,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAC7B,eAED,CAAO,CAAC,cACRtC,IAAA,UACI2C,IAAI,CAAC,UAAU,CACfM,SAAS,CAAE,CAAE,CACbb,EAAE,CAAC,SAAS,CACZI,IAAI,CAAC,SAAS,CACdI,WAAW,CAAC,eAAe,CAC3BP,SAAS,CAAC,aAAa,CACvBQ,KAAK,CAAEnC,YAAa,CACpBoC,QAAQ,CAAG9B,CAAC,EACRL,eAAe,CAACK,CAAC,CAAC+B,aAAa,CAACF,KAAK,CACxC,CACDK,YAAY,CAAC,KAAK,CAClBF,QAAQ,MACX,CAAC,EACD,CAAC,cACNhD,IAAA,WACImD,QAAQ,CAAEvC,IAAK,CACf+B,IAAI,CAAC,QAAQ,CACbN,SAAS,CAAC,iBAAiB,CAC3Be,OAAO,CAAGpC,CAAC,EAAKD,QAAQ,CAACC,CAAC,CAAE,CAAAsB,QAAA,CAC/B,SAED,CAAQ,CAAC,EACH,CAAC,CACT,CAAC,CACN,CAAC,EACL,CAAC,CACD,CAAC,CAElB,CAAC,CAED,cAAe,CAAAnC,IAAI"},"metadata":{},"sourceType":"module","externalDependencies":[]}